import{r as e,i as a,c as r,a as l,h as s,b as i,m as t,w as n,p as o,q as d,g as u,s as p,d as c,u as m,t as b,x as v,f}from"./vendor-vue.GR9O-o6O.js";import{_ as g,u as y,a as w,b as k}from"./index.BFYIaKWM.js";const h={class:"login-container"},x={class:"login-wrapper"},z={class:"card login-card border-0"},G={class:"card-body p-4 p-lg-5"},K={key:0},S={class:"mb-4"},E={class:"input-group input-group-lg"},L={class:"mb-4"},U={class:"d-flex justify-content-between align-items-center mb-1"},q={class:"input-group input-group-lg"},M=["type"],V={class:"mb-4"},T={class:"form-check"},C={class:"d-grid gap-2 mb-4"},D=["disabled"],P={key:0,class:"spinner-border spinner-border-sm me-2"},Y={class:"d-grid gap-3 mb-4"},A=["disabled"],_=["disabled"],H={class:"text-center"},j={class:"mb-0"},O={key:1},$={class:"mb-3"},B={class:"input-group"},N={class:"mb-3"},F={class:"input-group"},I={class:"mb-3"},W={class:"input-group"},Z={class:"mb-3"},J={class:"input-group"},Q={class:"mb-3"},R={class:"input-group"},X={class:"mb-4"},ee={class:"input-group"},ae={key:0,class:"form-text text-danger"},re={class:"d-grid gap-2 mb-4"},le=["disabled"],se={key:0,class:"spinner-border spinner-border-sm me-2"},ie={class:"text-center"},te={class:"mb-0"},ne={key:2},oe={class:"mb-4"},de={class:"input-group input-group-lg"},ue={class:"d-grid gap-2 mb-4"},pe=["disabled"],ce={key:0,class:"spinner-border spinner-border-sm me-2"},me={class:"text-center"},be={class:"mb-0"},ve={class:"text-center text-muted mt-3 footer-info"},fe={class:"mb-1"},ge=g({__name:"Login",setup(g){const ge=v(),{toast:ye}=y(),we=w(),ke=e("login"),he=e(!1),xe=e(!1),ze=e({email:"",password:"",rememberMe:!1}),Ge=e({name:"",email:"",username:"",department:"",password:"",confirmPassword:""}),Ke=e({email:""}),Se=a((()=>""!==Ge.value.password&&""!==Ge.value.confirmPassword&&Ge.value.password!==Ge.value.confirmPassword)),Ee=async()=>{if(ze.value.email&&ze.value.password){he.value=!0;try{const e=await we.login({email:ze.value.email,password:ze.value.password,rememberMe:ze.value.rememberMe});e.success?(ye.success(`Hoş geldiniz, ${e.user.displayName||e.user.email}`),ge.push("/")):ye.error(e.error||"Giriş başarısız oldu. Lütfen bilgilerinizi kontrol ediniz.")}catch(e){ye.error("Giriş yapılırken bir hata oluştu")}finally{he.value=!1}}else ye.warning("Lütfen e-posta ve şifrenizi giriniz.")},Le=async()=>{if(Se.value)ye.warning("Şifreler eşleşmiyor. Lütfen kontrol ediniz.");else if(Ge.value.name&&Ge.value.email&&Ge.value.username&&Ge.value.department&&Ge.value.password){he.value=!0;try{const e=await we.register({name:Ge.value.name,email:Ge.value.email,username:Ge.value.username,department:Ge.value.department,password:Ge.value.password});e.success?(ye.success("Kayıt işlemi başarılı! Giriş yapabilirsiniz."),ke.value="login",ze.value.email=Ge.value.email,Ge.value={name:"",email:"",username:"",department:"",password:"",confirmPassword:""}):ye.error(e.error||"Kayıt işlemi başarısız oldu. Lütfen tekrar deneyiniz.")}catch(e){ye.error("Kayıt olurken bir hata oluştu")}finally{he.value=!1}}else ye.warning("Lütfen tüm alanları doldurunuz.")},Ue=async()=>{if(Ke.value.email){he.value=!0;try{const e=await we.resetPassword(Ke.value.email);e.success?(ye.success(`${Ke.value.email} adresine şifre sıfırlama bağlantısı gönderildi.`),ke.value="login",Ke.value.email=""):ye.error(e.error||"Şifre sıfırlama işlemi başarısız oldu. Lütfen tekrar deneyiniz.")}catch(e){ye.error("Şifre sıfırlama işlemi sırasında bir hata oluştu")}finally{he.value=!1}}else ye.warning("Lütfen e-posta adresinizi giriniz.")},qe=async()=>{he.value=!0;try{const e=await we.loginWithGoogle();e.success?(ye.success(`Hoş geldiniz, ${e.user.displayName||e.user.email}`),ge.push("/")):"auth/popup-closed-by-user"===e.code||ye.error(e.error||"Google ile giriş başarısız oldu. Lütfen tekrar deneyiniz.")}catch(e){ye.error("Google ile giriş yapılırken bir hata oluştu")}finally{he.value=!1}},Me=async()=>{he.value=!0;try{const e=await we.demoLogin();e.success?(ye.info("Demo modunda giriş yapıldı. Tam yetkiye sahipsiniz."),ge.push("/")):ye.error(e.error||"Demo giriş başarısız oldu. Lütfen tekrar deneyiniz.")}catch(e){ye.error("Demo giriş yapılırken bir hata oluştu")}finally{he.value=!1}};return(e,a)=>(f(),r("div",h,[a[51]||(a[51]=l("div",{class:"login-bg"},null,-1)),l("div",x,[l("div",z,[a[49]||(a[49]=s('<div class="card-header bg-transparent text-center py-4 border-0" data-v-4b2ffdf3><div class="logo-container mb-3" data-v-4b2ffdf3><img src="'+k+'" alt="METS Logo" class="logo-img" data-v-4b2ffdf3></div><h3 class="brand-title" data-v-4b2ffdf3>METS</h3><p class="text-muted" data-v-4b2ffdf3>Mehmet Endüstriyel Takip Sistemi</p></div>',1)),l("div",G,["login"===ke.value?(f(),r("div",K,[a[24]||(a[24]=l("h4",{class:"card-title text-center mb-4"},"Giriş Yap",-1)),l("form",{onSubmit:t(Ee,["prevent"])},[l("div",S,[a[16]||(a[16]=l("label",{for:"email",class:"form-label"},"E-posta",-1)),l("div",E,[a[15]||(a[15]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-envelope"})],-1)),n(l("input",{type:"email",class:"form-control border-start-0",id:"email","onUpdate:modelValue":a[0]||(a[0]=e=>ze.value.email=e),placeholder:"E-posta adresiniz",required:""},null,512),[[o,ze.value.email]])])]),l("div",L,[l("div",U,[a[17]||(a[17]=l("label",{for:"password",class:"form-label"},"Şifre",-1)),l("a",{href:"#",onClick:a[1]||(a[1]=t((e=>ke.value="forgot"),["prevent"])),class:"text-decoration-none small"}," Şifremi Unuttum? ")]),l("div",q,[a[18]||(a[18]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-lock"})],-1)),n(l("input",{type:xe.value?"text":"password",class:"form-control border-start-0 border-end-0",id:"password","onUpdate:modelValue":a[2]||(a[2]=e=>ze.value.password=e),placeholder:"Şifreniz",required:""},null,8,M),[[d,ze.value.password]]),l("button",{class:"input-group-text bg-transparent border-start-0",type:"button",onClick:a[3]||(a[3]=e=>xe.value=!xe.value)},[l("i",{class:u(xe.value?"bi bi-eye-slash":"bi bi-eye")},null,2)])])]),l("div",V,[l("div",T,[n(l("input",{type:"checkbox",class:"form-check-input",id:"remember-me","onUpdate:modelValue":a[4]||(a[4]=e=>ze.value.rememberMe=e)},null,512),[[p,ze.value.rememberMe]]),a[19]||(a[19]=l("label",{class:"form-check-label",for:"remember-me"}," Beni hatırla ",-1))])]),l("div",C,[l("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:he.value},[he.value?(f(),r("span",P)):i("",!0),a[20]||(a[20]=l("span",null,"Giriş Yap",-1))],8,D)])],32),a[25]||(a[25]=l("div",{class:"social-divider"},[l("span",null,"veya")],-1)),l("div",Y,[l("button",{type:"button",class:"btn btn-outline-secondary btn-lg social-btn",onClick:qe,disabled:he.value},a[21]||(a[21]=[l("i",{class:"bi bi-google me-2"},null,-1),c(" Google ile Giriş Yap ")]),8,A),l("button",{type:"button",class:"btn btn-outline-info btn-lg social-btn",onClick:Me,disabled:he.value},a[22]||(a[22]=[l("i",{class:"bi bi-person-circle me-2"},null,-1),c(" Demo Kullanıcı ile Giriş ")]),8,_)]),l("div",H,[l("p",j,[a[23]||(a[23]=c(" Hesabınız yok mu? ")),l("a",{href:"#",onClick:a[5]||(a[5]=t((e=>ke.value="register"),["prevent"])),class:"ms-1 text-decoration-none fw-bold"}," Kayıt Ol ")])])])):"register"===ke.value?(f(),r("div",O,[a[42]||(a[42]=l("h4",{class:"card-title text-center mb-4"},"Hesap Oluştur",-1)),l("form",{onSubmit:t(Le,["prevent"])},[l("div",$,[a[27]||(a[27]=l("label",{for:"register-name",class:"form-label"},"Ad Soyad",-1)),l("div",B,[a[26]||(a[26]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-person"})],-1)),n(l("input",{type:"text",class:"form-control border-start-0",id:"register-name","onUpdate:modelValue":a[6]||(a[6]=e=>Ge.value.name=e),placeholder:"Ad Soyad",required:""},null,512),[[o,Ge.value.name]])])]),l("div",N,[a[29]||(a[29]=l("label",{for:"register-email",class:"form-label"},"E-posta",-1)),l("div",F,[a[28]||(a[28]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-envelope"})],-1)),n(l("input",{type:"email",class:"form-control border-start-0",id:"register-email","onUpdate:modelValue":a[7]||(a[7]=e=>Ge.value.email=e),placeholder:"E-posta adresiniz",required:""},null,512),[[o,Ge.value.email]])])]),l("div",I,[a[31]||(a[31]=l("label",{for:"register-username",class:"form-label"},"Kullanıcı Adı",-1)),l("div",W,[a[30]||(a[30]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-at"})],-1)),n(l("input",{type:"text",class:"form-control border-start-0",id:"register-username","onUpdate:modelValue":a[8]||(a[8]=e=>Ge.value.username=e),placeholder:"Kullanıcı adınız",required:""},null,512),[[o,Ge.value.username]])])]),l("div",Z,[a[34]||(a[34]=l("label",{for:"register-department",class:"form-label"},"Departman",-1)),l("div",J,[a[33]||(a[33]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-building"})],-1)),n(l("select",{class:"form-select border-start-0",id:"register-department","onUpdate:modelValue":a[9]||(a[9]=e=>Ge.value.department=e),required:""},a[32]||(a[32]=[s('<option value="" disabled selected data-v-4b2ffdf3>Departmanınızı seçin</option><option value="Yönetim" data-v-4b2ffdf3>Yönetim</option><option value="Teknik" data-v-4b2ffdf3>Teknik</option><option value="Üretim" data-v-4b2ffdf3>Üretim</option><option value="Satın Alma" data-v-4b2ffdf3>Satın Alma</option><option value="Kalite Kontrol" data-v-4b2ffdf3>Kalite Kontrol</option><option value="İnsan Kaynakları" data-v-4b2ffdf3>İnsan Kaynakları</option>',7)]),512),[[m,Ge.value.department]])])]),l("div",Q,[a[36]||(a[36]=l("label",{for:"register-password",class:"form-label"},"Şifre",-1)),l("div",R,[a[35]||(a[35]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-lock"})],-1)),n(l("input",{type:"password",class:"form-control border-start-0",id:"register-password","onUpdate:modelValue":a[10]||(a[10]=e=>Ge.value.password=e),placeholder:"Şifre (en az 6 karakter)",required:"",minlength:"6"},null,512),[[o,Ge.value.password]])])]),l("div",X,[a[39]||(a[39]=l("label",{for:"register-password-confirm",class:"form-label"},"Şifre Tekrar",-1)),l("div",ee,[a[37]||(a[37]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-lock-fill"})],-1)),n(l("input",{type:"password",class:"form-control border-start-0",id:"register-password-confirm","onUpdate:modelValue":a[11]||(a[11]=e=>Ge.value.confirmPassword=e),placeholder:"Şifrenizi tekrar girin",required:""},null,512),[[o,Ge.value.confirmPassword]])]),Se.value?(f(),r("div",ae,a[38]||(a[38]=[l("i",{class:"bi bi-exclamation-triangle me-1"},null,-1),c(" Şifreler eşleşmiyor ")]))):i("",!0)]),l("div",re,[l("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:he.value||Se.value},[he.value?(f(),r("span",se)):i("",!0),a[40]||(a[40]=c(" Kayıt Ol "))],8,le)])],32),l("div",ie,[l("p",te,[a[41]||(a[41]=c(" Zaten hesabınız var mı? ")),l("a",{href:"#",onClick:a[12]||(a[12]=t((e=>ke.value="login"),["prevent"])),class:"ms-1 text-decoration-none fw-bold"}," Giriş Yap ")])])])):"forgot"===ke.value?(f(),r("div",ne,[a[47]||(a[47]=l("h4",{class:"card-title text-center mb-4"},"Şifremi Unuttum",-1)),a[48]||(a[48]=l("p",{class:"text-muted text-center mb-4"},"E-posta adresinizi giriniz. Şifre sıfırlama bağlantısı gönderilecektir.",-1)),l("form",{onSubmit:t(Ue,["prevent"])},[l("div",oe,[a[44]||(a[44]=l("label",{for:"forgot-email",class:"form-label"},"E-posta",-1)),l("div",de,[a[43]||(a[43]=l("span",{class:"input-group-text bg-transparent border-end-0"},[l("i",{class:"bi bi-envelope"})],-1)),n(l("input",{type:"email",class:"form-control border-start-0",id:"forgot-email","onUpdate:modelValue":a[13]||(a[13]=e=>Ke.value.email=e),placeholder:"E-posta adresiniz",required:""},null,512),[[o,Ke.value.email]])])]),l("div",ue,[l("button",{type:"submit",class:"btn btn-primary btn-lg",disabled:he.value},[he.value?(f(),r("span",ce)):i("",!0),a[45]||(a[45]=c(" Şifre Sıfırlama Bağlantısı Gönder "))],8,pe)])],32),l("div",me,[l("p",be,[l("a",{href:"#",onClick:a[14]||(a[14]=t((e=>ke.value="login"),["prevent"])),class:"text-decoration-none"},a[46]||(a[46]=[l("i",{class:"bi bi-arrow-left me-1"},null,-1),c(" Giriş sayfasına dön ")]))])])])):i("",!0)])]),l("div",ve,[l("p",fe,"© "+b((new Date).getFullYear())+" METS - MehmetEndüstriyelTakip Sistemi",1),a[50]||(a[50]=l("p",{class:"mb-0 small"},"v2.0.0",-1))])])]))}},[["__scopeId","data-v-4b2ffdf3"]]);export{ge as default};
